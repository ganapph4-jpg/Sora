<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sora Video Downloader</title>
<style>
body { font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; margin:0; background:#f0f2f5; color:#333; }
.container { background:white; padding:2rem 3rem; border-radius:16px; box-shadow:0 8px 24px rgba(0,0,0,0.1); width:90%; max-width:600px; text-align:center; }
h1 { margin-bottom:1.5rem; }
input[type="url"] { width:100%; padding:12px; margin-bottom:1rem; border:1px solid #ccc; border-radius:12px; font-size:16px; }
input[type="url"]:focus { border-color:#007bff; outline:none; }
button { width:100%; padding:12px; background:#007bff; color:white; border:none; border-radius:12px; cursor:pointer; font-size:16px; transition:0.2s; }
button:hover:not(:disabled) { background:#0056b3; transform:translateY(-2px); }
button:disabled { background:#a0cfff; cursor:not-allowed; }
#result { margin-top:1.5rem; background:#e9ecef; padding:1rem; border-radius:12px; min-height:100px; text-align:center; }
video { width:100%; margin-top:1rem; border-radius:12px; }
.footer-link { margin-top:2rem; font-size:14px; }
.footer-link a { color:#6c757d; text-decoration:none; }
.footer-link a:hover { color:#343a40; text-decoration:underline; }
.error { color:#d93025; font-weight:bold; }
</style>
</head>
<body>
<div class="container">
<h1>Sora Video Downloader</h1>
<form id="soraForm">
<input type="url" id="soraUrl" placeholder="Paste Sora URL here" required>
<button type="submit" id="submitBtn">Get Video Link</button>
</form>
<div id="result"><p>Results will appear here...</p></div>
<div class="footer-link">
<a href="https://github.com/tibbar213/sora-downloader" target="_blank">GitHub Repository</a>
</div>
</div>

<script>
const form = document.getElementById('soraForm');
const urlInput = document.getElementById('soraUrl');
const submitBtn = document.getElementById('submitBtn');
const resultDiv = document.getElementById('result');

form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const soraUrl = urlInput.value;
    submitBtn.disabled = true;
    submitBtn.textContent = 'Fetching...';
    resultDiv.innerHTML = '<p>Loading...</p>';

    try {
        const response = await fetch('/get-sora-link', {
            method:'POST',
            headers:{ 'Content-Type':'application/json' },
            body: JSON.stringify({ url: soraUrl })
        });
        const data = await response.json();

        if (response.ok && data.download_link) {
            const videoUrl = data.download_link;
            resultDiv.innerHTML = `
                <p><strong>Success!</strong></p>
                <video controls crossorigin="anonymous">
                    <source src="${videoUrl}" type="video/mp4">
                    Your browser does not support video playback.
                </video>
                <p style="margin-top:1rem;">
                    <a href="${videoUrl}" download="sora_video.mp4">
                        <button type="button">Download Video</button>
                    </a>
                </p>
                <p><strong>Direct Link:</strong> <a href="${videoUrl}" target="_blank">${videoUrl}</a></p>
            `;
        } else {
            throw new Error(data.error || 'Unknown error');
        }
    } catch (err) {
        resultDiv.innerHTML = `<p class="error">Error: ${err.message}</p>`;
    } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Get Video Link';
    }
});
</script>
</body>
</html>
